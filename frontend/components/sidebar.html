<aside
  id="left-sidebar"
  class="w-55 bg-sidebar flex-shrink-0 flex flex-col text-gray-300 h-full transition-all duration-300 relative"
>
  <!-- Sidebar Header -->
  <div class="h-16 flex items-center px-6 border-b border-gray-700/50 justify-between">
    <div class="flex items-center sidebar-brand">
      <i class="fas fa-file-invoice text-white mr-3 text-xl"></i>
      <span class="text-white font-semibold text-lg tracking-wide sidebar-brand-text">Invoice</span>
    </div>
  </div>

  <div class="flex-1 overflow-y-auto sidebar-scroll py-4 px-3 space-y-1">
    <!-- Getting Started Button -->
    <button
      class="w-full flex items-center px-3 py-2 text-sm font-normal text-gray-300 bg-gray-700/30 hover:bg-gray-700/50 rounded-md mb-6 transition-colors group sidebar-getting-started"
    >
      <i class="fa-solid fa-wand-magic-sparkles text-yellow-400"></i>
      <span class="ml-3 text-yellow-400 sidebar-text">Getting Started</span>
    </button>

    <nav class="space-y-1">
      <a
        href="index.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal text-white bg-activeBlue rounded-md transition-all"
      >
        <i class="fas fa-home w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
        <span class="sidebar-text">Home</span>
      </a>
      <a
        href="./pages/customers.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md transition-all"
      >
        <i class="fas fa-users w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
        <span class="sidebar-text">Customers</span>
      </a>
      <a
        href="./pages/items.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md transition-all"
      >
        <i class="fas fa-bag-shopping w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
        <span class="sidebar-text">Items</span>
      </a>
      <a
        href="./pages/quotes.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md transition-all"
      >
        <i class="fas fa-calculator w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
        <span class="sidebar-text">Quotes</span>
      </a>
      <a
        href="./pages/invoices.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md transition-all"
      >
        <i class="fa-solid fa-file w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
        <span class="sidebar-text">Invoices</span>
      </a>
      <a
        href="./pages/challans.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md transition-all"
      >
        <i class="fas fa-truck w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
        <span class="sidebar-text">Delivery Challans</span>
      </a>
      <a
        href="./pages/payments.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md transition-all"
      >
        <i class="fas fa-circle-down w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
        <span class="sidebar-text">Payments Received</span>
      </a>
      <a
        href="./pages/expenses.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md transition-all"
      >
        <i class="fa-solid fa-receipt w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
        <span class="sidebar-text">Expenses</span>
      </a>
      <a
        href="./pages/time.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md transition-all"
      >
        <i class="fa-solid fa-clock w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
        <span class="sidebar-text">Time Tracking</span>
      </a>
      <a
        href="./pages/reports.html"
        class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md transition-all"
      >
        <i
          class="fa-solid fa-chart-simple w-5 h-5 mr-3 flex items-center justify-center nav-icon"
        ></i>
        <span class="sidebar-text">Reports</span>
      </a>
    </nav>

    <div class="mt-8 mb-2">
      <h3
        class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 mt-8 sidebar-text"
      >
        Apps
      </h3>
      <nav class="space-y-1 text-sm font-medium">
        <a
          class="nav-link flex items-center px-3 py-2 text-sm font-normal hover:text-white hover:bg-gray-800 rounded-md group transition-all"
          href="./pages/adv_bill.html"
        >
          <i class="fa-solid fa-globe w-5 h-5 mr-3 flex items-center justify-center nav-icon"></i>
          <span class="sidebar-text">Advanced Billing</span>
        </a>
      </nav>
    </div>
  </div>

  <!-- Bottom Collapse Toggle -->
  <div class="border-t border-gray-700/50 p-3">
    <button
      id="collapse-left-sidebar-bottom"
      class="w-full flex items-center justify-center px-3 py-2 text-sm font-normal text-gray-400 hover:text-white hover:bg-gray-800 rounded-md transition-colors"
      title="Toggle sidebar"
    >
      <i class="fa-solid fa-chevron-left" id="left-sidebar-bottom-icon"></i>
    </button>
  </div>
</aside>

<style>
  /* Collapsed sidebar styles */
  #left-sidebar.collapsed .nav-link {
    flex-direction: column;
    padding: 0.75rem 0.5rem;
    text-align: center;
  }

  #left-sidebar.collapsed .nav-icon {
    margin-right: 0;
    margin-bottom: 0.25rem;
  }

  #left-sidebar.collapsed .sidebar-text {
    font-size: 0.625rem;
    line-height: 1;
    margin-top: 0.25rem;
    display: block !important;
  }

  #left-sidebar.collapsed .sidebar-getting-started {
    flex-direction: column;
    padding: 0.75rem 0.5rem;
    text-align: center;
  }

  #left-sidebar.collapsed .sidebar-getting-started i {
    margin-bottom: 0.25rem;
  }

  #left-sidebar.collapsed .sidebar-getting-started .sidebar-text {
    margin-left: 0;
    font-size: 0.625rem;
    line-height: 1;
    margin-top: 0.25rem;
  }
</style>

<script>
  // Left sidebar collapse functionality
  (function () {
    const sidebar = document.getElementById("left-sidebar");
    const collapseBtnBottom = document.getElementById("collapse-left-sidebar-bottom");
    const iconBottom = document.getElementById("left-sidebar-bottom-icon");
    const sidebarBrandText = document.querySelector(".sidebar-brand-text");

    // Restore sidebar state from localStorage
    let isCollapsed = localStorage.getItem("leftSidebarCollapsed") === "true";

    // Apply initial state
    if (isCollapsed) {
      sidebar.classList.remove("w-64");
      sidebar.classList.add("w-20", "collapsed");
      iconBottom.classList.remove("fa-chevron-left");
      iconBottom.classList.add("fa-chevron-right");
      if (sidebarBrandText) sidebarBrandText.classList.add("hidden");
    }

    function toggleSidebar() {
      isCollapsed = !isCollapsed;

      // Save state to localStorage
      localStorage.setItem("leftSidebarCollapsed", isCollapsed);

      if (isCollapsed) {
        // Collapse
        sidebar.classList.remove("w-64");
        sidebar.classList.add("w-20", "collapsed");
        iconBottom.classList.remove("fa-chevron-left");
        iconBottom.classList.add("fa-chevron-right");
        if (sidebarBrandText) sidebarBrandText.classList.add("hidden");
      } else {
        // Expand
        sidebar.classList.remove("w-20", "collapsed");
        sidebar.classList.add("w-64");
        iconBottom.classList.remove("fa-chevron-right");
        iconBottom.classList.add("fa-chevron-left");
        if (sidebarBrandText) sidebarBrandText.classList.remove("hidden");
      }
    }

    if (collapseBtnBottom) {
      collapseBtnBottom.addEventListener("click", toggleSidebar);
    }
  })();
</script>
